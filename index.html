<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyNotebook - Browser Python</title>

    <!-- PWA & Mobile Icons -->
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0a0a0a">

    <!-- Updated Favicon Links -->
    <link rel="icon" href="/assets/logo.png" type="image/png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/logo.png">
    <link rel="shortcut icon" href="/assets/logo.png">
    <link rel="apple-touch-icon" href="/assets/logo.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/logo.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/logo.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/logo.png">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="PyNotebook is a free, privacy-focused Python notebook that runs entirely in your browser using Pyodide. No server setup required.">
    <meta name="keywords" content="python, notebook, browser, pyodide, jupyter, client-side, webassembly, coding">
    <meta name="author" content="PyNotebook">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://pynotebooks.vercel.app/" />
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; block-all-mixed-content;">
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pynotebooks.vercel.app/">
    <meta property="og:title" content="PyNotebook - Python in your Browser">
    <meta property="og:description" content="Run Python code instantly in your browser. Free, secure, and powered by WebAssembly.">
    <meta property="og:image" content="https://pynotebooks.vercel.app/assets/logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://pynotebooks.vercel.app/">
    <meta property="twitter:title" content="PyNotebook - Python in your Browser">
    <meta property="twitter:description" content="Run Python code instantly in your browser. Free, secure, and powered by WebAssembly.">
    <meta property="twitter:image" content="https://pynotebooks.vercel.app/assets/logo.png">

    <!-- JSON-LD Schema -->
    <script type="application/ld+json">
    [
        {
            "@context": "https://schema.org",
            "@type": "SoftwareApplication",
            "name": "PyNotebook",
            "operatingSystem": "Any",
            "applicationCategory": "DeveloperApplication",
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "USD"
            },
            "description": "A browser-based Python notebook environment powered by Pyodide.",
            "url": "https://pynotebooks.vercel.app/",
            "image": "https://pynotebooks.vercel.app/assets/logo.png",
            "author": {
                "@type": "Organization",
                "name": "PyNotebook"
            }
        },
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "PyNotebook",
            "url": "https://pynotebooks.vercel.app/",
            "logo": "https://pynotebooks.vercel.app/assets/logo.png",
            "sameAs": []
        }
    ]
    </script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>

    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

        // --- FIREBASE CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyC-tuoxtkVDRk9YhqRJEwlIXLfQxtyTY1A",
            authDomain: "pynotebookaoh.firebaseapp.com",
            projectId: "pynotebookaoh",
            storageBucket: "pynotebookaoh.firebasestorage.app",
            messagingSenderId: "864102474680",
            appId: "1:864102474680:web:38ad47e9f68f635261e54d",
            measurementId: "G-R5NREN74YY"
        };

        let app, auth, db;
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase initialized");
        } catch (e) {
            console.error("Firebase initialization failed. Please check your config.", e);
        }

        // Expose to global window for React
        window.firebaseServices = {
            auth,
            db,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            GoogleAuthProvider,
            signInWithPopup,
            sendPasswordResetEmail,
            doc,
            getDoc,
            setDoc
        };
    </script>

    <!-- PrismJS for Syntax Highlighting (Still used for lightweight viewing if needed) -->
    <link href="https://unpkg.com/prismjs@1.29.0/themes/prism.css" rel="stylesheet" />
    <script src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <!-- CodeMirror 5 (Lightweight, Robust) -->
    <link rel="stylesheet" href="https://unpkg.com/codemirror@5.65.16/lib/codemirror.css" />
    <link rel="stylesheet" href="https://unpkg.com/codemirror@5.65.16/theme/monokai.css" />
    <link rel="stylesheet" href="https://unpkg.com/codemirror@5.65.16/theme/eclipse.css" />
    <script src="https://unpkg.com/codemirror@5.65.16/lib/codemirror.js"></script>
    <script src="https://unpkg.com/codemirror@5.65.16/mode/python/python.js"></script>
    <script src="https://unpkg.com/codemirror@5.65.16/addon/display/placeholder.js"></script>
    <script src="https://unpkg.com/codemirror@5.65.16/addon/search/searchcursor.js"></script>

    <!-- CodeMirror Hint Addon -->
    <link rel="stylesheet" href="https://unpkg.com/codemirror@5.65.16/addon/hint/show-hint.css" />
    <script src="https://unpkg.com/codemirror@5.65.16/addon/hint/show-hint.js"></script>

    <!-- LZ-String for Compression -->
    <script src="/vendor/lz-string.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class', // Enable class-based dark mode
            theme: {
                extend: {
                    colors: {
                        // Custom "Colab-like" Neutral Gray Palette (Blackish-Grey)
                        gray: { 
                            50: '#f9fafb', 
                            100: '#f5f5f5', 
                            200: '#e5e5e5', 
                            300: '#d4d4d4', 
                            400: '#a3a3a3', 
                            500: '#737373', 
                            600: '#525252', 
                            700: '#404040', 
                            800: '#262626', 
                            900: '#171717', 
                            950: '#0a0a0a' 
                        }
                    }
                }
            }
        }
    </script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">

</head>
<body class="bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100 transition-colors duration-200">
    <div id="root"></div>

    <!-- Application Logic -->
    <script type="text/babel" src="/assets/js/python_helpers.js"></script>
    <script type="text/babel" src="/assets/js/icons.js"></script>
    <script type="text/babel" src="/assets/js/ui_components.js"></script>
    <script type="text/babel" src="/assets/js/app_components.js"></script>
    <script type="text/babel" src="/assets/js/main.js"></script>
</body>
</html>
